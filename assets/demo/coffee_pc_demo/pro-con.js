// Generated by CoffeeScript 1.4.0
(function() {
  var N, ProCon, func, procon;

  N = 10;

  func = function(a, b) {
    if (a == null) {
      a = 4;
    }
    if (b == null) {
      b = 6;
    }
    return a + b;
  };

  ProCon = (function() {

    function ProCon() {}

    ProCon.prototype.data = {
      mutex: 1,
      empty: N,
      full: 0,
      front: 0,
      rear: 0,
      buf: []
    };

    ProCon.prototype.init = function() {
      var i, newDom,
        _this = this;
      i = 0;
      while (i &lt; N) {
        newDom = $(&apos;<div class="bufBox"><div class="bufCover">&apos; + i + &apos;</div>&apos; + i + &apos;</div>&apos;);
        $(&apos;#buf&apos;).append(newDom);
        this.data.buf.push(&apos;e&apos;);
        i++;
      }
      $(&apos;#produce&apos;).click(function() {
        return _this.producer();
      });
      return $(&apos;#consume&apos;).click(function() {
        return _this.consumer();
      });
    };

    ProCon.prototype.p = function(num) {
      return --num;
    };

    ProCon.prototype.v = function(num) {
      return ++num;
    };

    ProCon.prototype.produceItem = function() {
      $(&apos;<p class="desPro">&#x751F;&#x4EA7;&#x4E86;&#x4EA7;&#x54C1;</p>&apos;).insertBefore($(&quot;#des p:first&quot;));
      return &apos;m&apos;;
    };

    ProCon.prototype.consumeItem = function() {
      return $(&apos;<p class="desCon">&#x6D88;&#x8D39;&#x4E86;&#x4EA7;&#x54C1;</p>&apos;).insertBefore($(&quot;#des p:first&quot;));
    };

    ProCon.prototype.enterItem = function(item) {
      var str;
      this.data.front = (this.data.front + 1) % N;
      this.data.buf[this.data.front] = item;
      str = &quot;&#x5B58;&#x5165;&#x4EA7;&#x54C1;&quot; + this.data.buf[this.data.front] + &quot;&#x5230;&#x7F13;&#x51B2;&#x533A;&quot; + this.data.front;
      $(&quot;<p class="desPro">&quot; + str + &quot;</p>&quot;).insertBefore($(&quot;#des p:first&quot;));
      return $($(&apos;.bufCover&apos;)[this.data.front]).animate({
        &quot;height&quot;: &quot;50px&quot;
      });
    };

    ProCon.prototype.removeItem = function() {
      var str;
      this.data.rear = (this.data.rear + 1) % N;
      this.data.buf[this.data.rear] = &apos;e&apos;;
      str = &quot;&#x53D6;&#x51FA;&#x4EA7;&#x54C1;&quot; + this.data.buf[this.data.rear] + &quot;&#x4ECE;&#x7F13;&#x51B2;&#x533A;&quot; + this.data.rear;
      $(&quot;<p class="desCon">&quot; + str + &quot;</p>&quot;).insertBefore($(&quot;#des p:first&quot;));
      return $($(&apos;.bufCover&apos;)[this.data.rear]).animate({
        &quot;height&quot;: &quot;0px&quot;
      });
    };

    ProCon.prototype.producer = function() {
      var item;
      if (this.data.full === N) {
        $(&quot;<p class="desSpe">&#x7F13;&#x51B2;&#x533A;&#x5DF2;&#x5168;&#x6EE1;</p>&quot;).insertBefore($(&quot;#des p:first&quot;));
        return;
      }
      item = this.produceItem();
      this.data.empty = this.p(this.data.empty);
      this.data.mutex = this.p(this.data.mutex);
      this.enterItem(item);
      this.data.mutex = this.v(this.data.mutex);
      return this.data.full = this.v(this.data.full);
    };

    ProCon.prototype.consumer = function() {
      if (this.data.empty === N) {
        $(&quot;<p class="desSpe">&#x7F13;&#x51B2;&#x533A;&#x5DF2;&#x7A7A;</p>&quot;).insertBefore($(&quot;#des p:first&quot;));
        return;
      }
      this.data.full = this.p(this.data.full);
      this.data.mutex = this.p(this.data.mutex);
      this.removeItem();
      this.data.mutex = this.v(this.data.mutex);
      this.data.empty = this.v(this.data.empty);
      return this.consumeItem();
    };

    return ProCon;

  })();

  procon = new ProCon;

  procon.init();

}).call(this);
